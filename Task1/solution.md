### Solution

For this task we will the 3 terraform providers. 

 - To generate the key we will use *tls* provider, in tls provider we will use *tls_private_key* resource.
   - This is a logical resource, so it contributes only to the current Terraform state and does not create any external managed resources. It provides various methods to retrieve the private and public keys generated.
   - The private key generated by this resource will be stored unencrypted in your Terraform state file. Use of this resource for production deployments is not recommended.
   - Note: Since a private key is a logical resource that lives only in the Terraform state, it will persist until it is explicitly destroyed by the user.
  
 - To save the private key to a file locally on the server we will use *local* provider, in local provider we will use *local_file* resource to save the key to a file locally.

 - Finally we will use *AWS* provider, in AWS provider we will use *aws_key_pair* resource. The aws_key_pair resource in Terraform is used to manage EC2 key pairs within AWS.

Now let's create a main.tf file and put the below content in it.

```
resource "tls_private_key" "rsa_key" {
  algorithm = "RSA"
  rsa_bits  = 4096
}

resource "local_file" "key_local" {
  content  = tls_private_key.rsa_key.private_key_pem
  filename = "/home/bob/datacenter-kp.pem"
}

resource "aws_key_pair" "aws_key" {
  key_name   = "datacenter-kp"
  public_key = tls_private_key.rsa_key.public_key_pem
}
```

Now run below commands.

 - The _terraform init_ command initializes a working directory containing Terraform configuration files. This command is the first step when starting a new Terraform project or cloning an existing one from version control. It prepares the directory
```
terraform init
```

 - The _terraform plan_ command is a core component of the Terraform workflow, allowing users to preview the changes Terraform intends to make to infrastructure before actually applying them. It acts as a "dry run" by comparing the current state of the infrastructure with the desired state defined in the Terraform configuration files. 
```
terraform plan
```

 - The terraform apply command is a core component of the Terraform workflow, responsible for enacting the changes defined in your Terraform configuration to your infrastructure.
 -   - Generates a Plan (if not provided): When executed without a saved plan file, terraform apply first generates an execution plan, similar to running terraform plan. This plan outlines the proposed changes to your infrastructure (creation, modification, or destruction of resources) to align with your current configuration.
     - Prompts for Approval: By default, terraform apply pauses after generating the plan and prompts for user confirmation. You must type yes to proceed with the application of changes.
     - Applies Changes: Upon confirmation, Terraform executes the actions detailed in the plan, interacting with the specified providers to create, update, or destroy resources in your target infrastructure.
     - Updates State File: After successfully applying the changes, Terraform updates its state file to reflect the new state of your managed infrastructure.
```
terraform apply
```
